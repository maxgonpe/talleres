{% load static %}
<link rel="stylesheet" href="{% static 'css/centralized-colors.css' %}">

<style>
  .list-group {
    background: var(--bg-card);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-sm);
  }
  
  .list-group-item {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    transition: var(--transition);
  }
  
  .list-group-item:hover {
    background: var(--bg-secondary);
    transform: translateX(4px);
  }
  
  .list-group-item details {
    border: none;
  }
  
  .list-group-item summary {
    background: var(--bg-card);
    color: var(--text-primary);
    border: none;
    cursor: pointer;
    padding: var(--spacing-sm);
    border-radius: var(--border-radius-sm);
    transition: var(--transition);
  }
  
  .list-group-item summary:hover {
    background: var(--bg-secondary);
  }
  
  .list-group-item strong {
    color: var(--text-primary);
    font-weight: 600;
  }
  
  .text-muted {
    color: var(--text-secondary) !important;
  }
  
  .btn {
    border-radius: var(--border-radius-sm);
    font-weight: 500;
    transition: var(--transition);
  }
  
  .btn-outline-primary {
    color: var(--primary-600);
    border-color: var(--primary-600);
  }
  
  .btn-outline-primary:hover {
    background: var(--primary-600);
    border-color: var(--primary-600);
    color: var(--text-inverse);
  }
  
  .btn-outline-danger {
    color: var(--danger-600);
    border-color: var(--danger-600);
  }
  
  .btn-outline-danger:hover {
    background: var(--danger-600);
    border-color: var(--danger-600);
    color: var(--text-inverse);
  }
  
  .btn-group {
    border-radius: var(--border-radius-sm);
  }
  
  .btn-group .btn {
    border-radius: 0;
  }
  
  .btn-group .btn:first-child {
    border-top-left-radius: var(--border-radius-sm);
    border-bottom-left-radius: var(--border-radius-sm);
  }
  
  .btn-group .btn:last-child {
    border-top-right-radius: var(--border-radius-sm);
    border-bottom-right-radius: var(--border-radius-sm);
  }
</style>

<ul class="list-group">
  {% for componente in componentes %}
    <li class="list-group-item">
      <details>
        <summary class="d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ componente.nombre }}</strong>
            <span class="text-secondary small">
              • Código: {{ componente.codigo|default:"—" }}
              • Activo: {{ componente.activo|yesno:"Sí,No" }}
            </span>
          </div>
          <div class="btn-group btn-group-sm">
            <a href="{% url 'componente_update' componente.id %}" class="btn btn-outline-primary">Editar</a>
            <a href="{% url 'componente_delete' componente.id %}" class="btn btn-outline-danger">Eliminar</a>
          </div>
        </summary>

        {% with hijos=componente.hijos.all %}
          {% if hijos %}
            {% include 'car/componentes_tree.html' with componentes=hijos %}
          {% endif %}
        {% endwith %}
      </details>
    </li>
  {% endfor %}
</ul>

