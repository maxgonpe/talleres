{% extends 'base.html' %}
{% block content %}
<div class="container py-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="m-0">ðŸ§© Componentes</h4>
    <a href="{% url 'componente_create' %}" class="btn btn-success btn-sm">+ Nuevo</a>
  </div>

  <form class="mb-3" method="get">
    <div class="input-group">
      <input type="text" class="form-control" name="q" placeholder="Buscar componente..." value="{{ q }}">
      <button class="btn btn-outline-secondary" type="submit">Buscar</button>
    </div>
  </form>

  {% if page_obj.object_list %}
    <ul class="list-group">
      {% for c in page_obj.object_list %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ c.nombre }}</strong>
            <div class="small text-muted">
              CÃ³digo: {{ c.codigo|default:"â€”" }} â€¢ Activo: {{ c.activo|yesno:"SÃ­,No" }}
              {% if c.padre %} â€¢ Padre: {{ c.padre.nombre }}
              {% else %}
              â€¢ Padre: Principal
              {% endif %}
          </div>
          </div>
          <div class="btn-group">
            <a class="btn btn-outline-primary btn-sm" href="{% url 'componente_update' c.id %}">Editar</a>
            <a class="btn btn-outline-danger btn-sm" href="{% url 'componente_delete' c.id %}">Eliminar</a>
          </div>
        </li>
      {% endfor %}
    </ul>

    <nav class="mt-3">
      <ul class="pagination pagination-sm mb-0">
        {% if page_obj.has_previous %}
          <li class="page-item"><a class="page-link" href="?q={{ q }}&page={{ page_obj.previous_page_number }}">Â«</a></li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">Â«</span></li>
        {% endif %}

        <li class="page-item disabled"><span class="page-link">PÃ¡gina {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span></li>

        {% if page_obj.has_next %}
          <li class="page-item"><a class="page-link" href="?q={{ q }}&page={{ page_obj.next_page_number }}">Â»</a></li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">Â»</span></li>
        {% endif %}
      </ul>
    </nav>
  {% else %}
    <div class="alert alert-light">No hay componentes registrados.</div>
  {% endif %}
</div>
{% endblock %}
