{% extends 'base.html' %}
{% block content %}
<h2>Acciones (verbos)</h2>

<div class="d-flex gap-2 mb-2">
  <a href="{% url 'accion_create' %}" class="btn btn-success mt-2">Nueva acción</a>
  <a href="{% url 'exportar_acciones_excel' %}" class="btn btn-info mt-2">📊 Excel</a>
  <a href="{% url 'exportar_acciones_pdf' %}" class="btn btn-danger mt-2">📄 PDF</a>
  <a href="{% url 'comp_accion_list' %}" class="btn btn-outline-primary mt-2">Ir a Componente + Acción</a>
  <a href="javascript:history.back()" class="btn btn-sm btn-warning mt-2">⬅️ Volver al panel</a>
</div>

<input type="text" id="filterInput" class="form-control my-2" placeholder="Buscar acción..." value="{{ q|default:'' }}">

<div id="acciones-container">
  {% for a in acciones %}
  <div class="card mb-2 accion-card">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div><strong>{{ a.nombre }}</strong></div>
      <div>
        <a href="{% url 'accion_update' a.pk %}" class="btn btn-sm btn-secondary">Editar</a>
        <a href="{% url 'accion_delete' a.pk %}" class="btn btn-sm btn-danger">Eliminar</a>
      </div>
    </div>
  </div>
  {% empty %}
  <p class="text-muted">No hay acciones registradas.</p>
  {% endfor %}
</div>

<script>
document.getElementById('filterInput')?.addEventListener('keyup', function(){
  const v = this.value.toLowerCase();
  document.querySelectorAll('.accion-card').forEach(c=>{
    c.style.display = c.textContent.toLowerCase().includes(v) ? 'block' : 'none';
  });
});
</script>
{% endblock %}
