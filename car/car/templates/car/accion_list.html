{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/centralized-colors.css' %}">
  <style>
    .accion-card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
    }
    
    .accion-card:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }
    
    .card-body {
      background: var(--bg-card);
      color: var(--text-primary);
    }
    
    .btn {
      border-radius: var(--border-radius-sm);
      font-weight: 500;
      transition: var(--transition);
    }
    
    .btn-success {
      background: var(--success-600);
      border-color: var(--success-600);
    }
    
    .btn-success:hover {
      background: var(--success-700);
      border-color: var(--success-700);
    }
    
    .btn-info {
      background: var(--info-600);
      border-color: var(--info-600);
    }
    
    .btn-info:hover {
      background: var(--info-700);
      border-color: var(--info-700);
    }
    
    .btn-danger {
      background: var(--danger-600);
      border-color: var(--danger-600);
    }
    
    .btn-danger:hover {
      background: var(--danger-700);
      border-color: var(--danger-700);
    }
    
    .btn-outline-primary {
      color: var(--primary-600);
      border-color: var(--primary-600);
    }
    
    .btn-outline-primary:hover {
      background: var(--primary-600);
      border-color: var(--primary-600);
    }
    
    .btn-warning {
      background: var(--warning-600);
      border-color: var(--warning-600);
    }
    
    .btn-warning:hover {
      background: var(--warning-700);
      border-color: var(--warning-700);
    }
    
    .btn-secondary {
      background: var(--neutral-600);
      border-color: var(--neutral-600);
    }
    
    .btn-secondary:hover {
      background: var(--neutral-700);
      border-color: var(--neutral-700);
    }
    
    .form-control {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      border-radius: var(--border-radius-sm);
    }
    
    .form-control:focus {
      background: var(--bg-card);
      border-color: var(--primary-600);
      color: var(--text-primary);
      box-shadow: 0 0 0 0.2rem var(--primary-200);
    }
    
    .text-muted {
      color: var(--text-secondary) !important;
    }
  </style>
{% endblock %}

{% block content %}
<h2>Acciones (verbos)</h2>

<div class="d-flex gap-2 mb-2">
  <a href="{% url 'accion_create' %}" class="btn btn-success mt-2">Nueva acci贸n</a>
  <a href="{% url 'exportar_acciones_excel' %}" class="btn btn-info mt-2"> Excel</a>
  <a href="{% url 'exportar_acciones_pdf' %}" class="btn btn-danger mt-2"> PDF</a>
  <a href="{% url 'comp_accion_list' %}" class="btn btn-outline-primary mt-2">Ir a Componente + Acci贸n</a>
  <a href="javascript:history.back()" class="btn btn-sm btn-warning mt-2">猬锔 Volver al panel</a>
</div>

<input type="text" id="filterInput" class="form-control my-2" placeholder="Buscar acci贸n..." value="{{ q|default:'' }}">

<div id="acciones-container">
  {% for a in acciones %}
  <div class="card mb-2 accion-card">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div><strong>{{ a.nombre }}</strong></div>
      <div>
        <a href="{% url 'accion_update' a.pk %}" class="btn btn-sm btn-secondary">Editar</a>
        <a href="{% url 'accion_delete' a.pk %}" class="btn btn-sm btn-danger" onclick="{% if ver_avisos %}return confirm('驴Est谩s seguro de eliminar esta acci贸n?');{% else %}return true;{% endif %}">Eliminar</a>
      </div>
    </div>
  </div>
  {% empty %}
  <p class="text-secondary">No hay acciones registradas.</p>
  {% endfor %}
</div>

<script>
document.getElementById('filterInput')?.addEventListener('keyup', function(){
  const v = this.value.toLowerCase();
  document.querySelectorAll('.accion-card').forEach(c=>{
    c.style.display = c.textContent.toLowerCase().includes(v) ? 'block' : 'none';
  });
});
</script>
{% endblock %}
